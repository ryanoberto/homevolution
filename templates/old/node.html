<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>Homevolution node</title>

<!-- Light Theme
<link rel="stylesheet" href="/css/bootstrap.min.css">
<link rel="stylesheet" href="/assets/css/bootstrap-theme.min.css">

-->
<!-- Dark Theme -->
<link rel="stylesheet" type="text/css" href="css/bootstrap-dark.css">
<link rel="stylesheet" type="text/css" href="css/bootstrap-dark.min.css" />


<link rel="stylesheet" href="/css/bootstrap-toggle.min.css">

<script src="/js/jquery.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/bootstrap-toggle.min.js"></script>

</head>
<body>
<br>
<div class="container">
    <div class="jumbotron">
<h2><a href="/">HomEvolutioN</a></h2>
	<h4>{{nodename}}</h4>
   <h4>Devices and Status</h4>

<div id="console-event" class="alert alert-warning" role="alert" style="display: none;"></div>

<ul class="list-group">
{% for dev ,v in devs.iteritems() %}
   {% if v == 'On' %} 
	<li class="list-group-item"> 
	{{ dev }}
	is
	<input class="toggle-event" a-device="{{ dev }}" type="checkbox" checked data-toggle="toggle" data-onstyle="success" data-offstyle="danger" data-size="small">
</li>
	
   {% else %}
	<li class="list-group-item"> 
	{{ dev }}
        is 
	<input class="toggle-event" a-device="{{ dev }}" type="checkbox" data-toggle="toggle" data-onstyle="success" data-offstyle="danger" data-size="small">
</li>
{% endif %}
   
   {% endfor %}

</ul>
</div>

    </div>
</div>

<script>
$('.toggle-event').change(function() {
	$('#console-event').html('Toggle:' + $(this).prop('checked')).show();
	
	if($(this).prop('checked') == true) {
		$('#console-event').html('Turned ' + $(this).attr('a-device') +' On');
		//console.log($(this).attr('a-device') +'On');
		$("#console-event").html('loading').load('http://{{nodeip}}:{{port}}/api/'+ $(this).attr('a-device') +'/on');	
		
	} else {
		$('#console-event').html('Turned ' + $(this).attr('a-device') +' Off');
		//console.log($(this).attr('a-device') + 'Off');
		$("#console-event").html('loading').load('http://{{nodeip}}:{{port}}/api/'+ $(this).attr('a-device') +'/off');

	}
    
});



</script>




</body>
</html>                    

